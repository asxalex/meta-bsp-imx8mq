From b1d356f30aa4748ccd80c6ebad983aedea594a4d Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Fri, 8 May 2020 18:12:23 +0300
Subject: [PATCH 45/51] cl-som-imx8: Change the board phys sdram size function

Signed-off-by: Valentin Raevsky <valentin@compulab.co.il>
---
 board/compulab/cl-som-imx8/cl-som-imx8.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/board/compulab/cl-som-imx8/cl-som-imx8.c b/board/compulab/cl-som-imx8/cl-som-imx8.c
index ec1455c9c7..f30be9cb8c 100644
--- a/board/compulab/cl-som-imx8/cl-som-imx8.c
+++ b/board/compulab/cl-som-imx8/cl-som-imx8.c
@@ -89,10 +89,13 @@ phys_size_t get_effective_memsize(void)
     return ram_size;
 }
 
-int dram_init(void)
+int board_phys_sdram_size(phys_size_t *size)
 {
-    gd->ram_size = get_effective_memsize();
-    return 0;
+	if (!size)
+		return -EINVAL;
+
+	*size = get_effective_memsize();
+	return 0;
 }
 
 int dram_init_banksize(void)
-- 
2.11.0

